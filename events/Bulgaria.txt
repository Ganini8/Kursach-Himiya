add_namespace = bulgaria

# Либерлизация на фоне поражения на фронте?
country_event = {
	id = bulgaria.1
	title = bulgaria.1.t
	desc = bulgaria.1.d
	picture = GFX_report_event_bul_dobro_pole
	
	fire_only_once = yes
	
	trigger = {
		has_start_date < 1918.11.11
		tag = BUL
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_BUL_HAS_CAPITULATED }
		is_subject = no
		controls_state = 48
		OR = {
			AND = {
				NOT = { controls_state = 106 controls_state = 993 }
				106  = { CONTROLLER = { has_war_with = BUL } }
				993  = { CONTROLLER = { has_war_with = BUL } }
			}
			AND = {
				NOT = { controls_state = 212 }
				212  = { CONTROLLER = { has_war_with = BUL } }
			}
			AND = {
				NOT = { controls_state = 945 }
				945  = { CONTROLLER = { has_war_with = BUL } }
			}
		}
	}

	mean_time_to_happen = {
		days = 0
	}
	
	
	immediate = {
		set_country_flag = BUL_not_cap_yet
		hidden_effect = {
			add_stability = -0.15
			add_war_support = -0.10
			if = { limit = { NOT = { has_country_flag = crisis_in_progress } } set_country_flag = crisis_in_progress }
			if = {
				limit = { NOT = { has_idea = mutiny_1 has_idea = mutiny_2 has_idea = mutiny_3 } }
				add_ideas =  mutiny_1
				country_event = stability.23
				else_if = {
					limit = { has_idea = mutiny_1 }
					remove_ideas = mutiny_1
					add_ideas =  mutiny_2
				}
				else_if = {
					limit = { has_idea = mutiny_2 }
					remove_ideas = mutiny_2
					add_ideas =  mutiny_3
				}
				else_if = {
					limit = { has_idea = mutiny_3 }
						add_stability = -0.10
						add_war_support = -0.20
				}
			}
		}
	}
	
	option = {
		name = bulgaria.1.a
		effect_tooltip = {
			add_stability = -0.15
			add_war_support = -0.10
			if = {
				limit = { NOT = { has_idea = mutiny_1 has_idea = mutiny_2 has_idea = mutiny_3 } }
				add_ideas =  mutiny_1
				else_if = {
					limit = { has_idea = mutiny_1 }
					remove_ideas = mutiny_1
					add_ideas =  mutiny_2
				}
				else_if = {
					limit = { has_idea = mutiny_2 }
					remove_ideas = mutiny_2
					add_ideas =  mutiny_3
				}
				else_if = {
					limit = { has_idea = mutiny_3 }
						add_stability = -0.10
						add_war_support = -0.20
				}
			}
		}
		add_political_power = -25
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
		country_event = { id = bulgaria.2 days = 3 }
		ai_chance = {
			factor = 4
		}
	}
	
	option = {
		name = bulgaria.1.b
		effect_tooltip = {
			add_stability = -0.15
			add_war_support = -0.10
			if = {
				limit = { NOT = { has_idea = mutiny_1 has_idea = mutiny_2 has_idea = mutiny_3 } }
				add_ideas =  mutiny_1
				else_if = {
					limit = { has_idea = mutiny_1 }
					remove_ideas = mutiny_1
					add_ideas =  mutiny_2
				}
				else_if = {
					limit = { has_idea = mutiny_2 }
					remove_ideas = mutiny_2
					add_ideas =  mutiny_3
				}
				else_if = {
					limit = { has_idea = mutiny_3 }
						add_stability = -0.10
						add_war_support = -0.20
				}
			}
		}
		trigger = { is_in_faction_with = GER is_in_faction_with = AUH NOT = { GER = { has_country_flag = GER_monarchy_fall } } }
		add_political_power = -70
		country_event = { id = bulgaria.3 days = 7 }
		ai_chance = {
			factor = 1
		}
	}
}

# Дипломатия Стамболийского
country_event = {
	id = bulgaria.2
	title = bulgaria.2.t
	desc = bulgaria.2.d
	picture = GFX_report_event_bul_stambolyisky_policy
	
	is_triggered_only = yes
	
	trigger = {
		tag = BUL
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_BUL_HAS_CAPITULATED }
	}
	
	option = {
		name = bulgaria.2.a # Вильгельм, введи войска
		trigger = { controls_state = 48 is_in_faction_with = GER is_in_faction_with = AUH NOT = { GER = { has_country_flag = GER_monarchy_fall } } OR = { is_neighbor_of = GER is_neighbor_of = AUH } }
		country_event = { id = bulgaria.3 days = 5 }
		ai_chance = {
			factor = 3
		}
	}
	
	option = {
		name = bulgaria.2.b # Мы справимся сами, но заключим мир
		country_event = { id = bulgaria.4 days = 7 }
		country_event = { id = compiegne_armistice.999 days = 3 }
		ai_chance = {
			factor = 1
		}
	}
	
	option = {
		name = bulgaria.2.c # Это поражение в войне
		country_event = { id = compiegne_armistice.999 days = 1 }
		set_country_flag = BUL_avoid_bunt_capitulations
		set_politics = {
			ruling_party = national_syndicalism
			elections_allowed = no
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.15
		}
		drop_cosmetic_tag = yes
		remove_ideas = BUL_Ferdinand_I_idea
		add_ideas = parliamentary_republic_gov_form
		add_stability = -0.10
		add_war_support = -0.20
		create_corps_commander = { name = "Rayko Daskalov" id = 75007 portrait_path = "gfx/leaders/BUL/Rayko_Daskalov.dds" traits = { politically_connected guerilla_fighter } skill = 1 attack_skill = 1 defense_skill = 2 planning_skill = 1 logistics_skill = 1 }
		ai_chance = {
			factor = 1
		}
	}
}

# Ввод германских войск
country_event = {
	id = bulgaria.3
	title = bulgaria.3.t
	desc = bulgaria.3.d
	picture = GFX_report_event_bul_with_central_powers
	
	is_triggered_only = yes
	
	trigger = {
		tag = BUL
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_BUL_HAS_CAPITULATED }
	}
	
	immediate = {
		hidden_effect = {
			add_stability = -0.05
			add_war_support = -0.10
			if = {
				limit = { has_idea = mutiny_1 NOT = { has_country_flag = crisis_in_progress } }
				remove_ideas = mutiny_1
				else_if = {
					limit = { has_idea = mutiny_2 NOT = { has_country_flag = crisis_in_progress } }
					remove_ideas = mutiny_2
				}
				else_if = {
					limit = { has_idea = mutiny_3 NOT = { has_country_flag = crisis_in_progress } }
					remove_ideas = mutiny_3
				}
			}
		}
	}
	
	option = {
		name = bulgaria.3.a
		add_political_power = -50
		country_event = { id = compiegne_armistice.999 days = 2 }
		set_country_flag = BUL_avoid_bunt_capitulations
		effect_tooltip = {
			add_stability = -0.05
			add_war_support = -0.10
		}
	}
	
	option = {
		name = bulgaria.3.b
		add_political_power = -100
		clr_country_flag = BUL_not_cap_yet
		set_country_flag = BUL_avoid_bunt_capitulations
		effect_tooltip = {
			add_stability = -0.05
			add_war_support = -0.10
		}
	}
	
}

# Столица в руках бунтующих солдат
country_event = {
	id = bulgaria.4
	title = bulgaria.4.t
	desc = bulgaria.4.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	fire_only_once = yes
	
	trigger = {
		tag = BUL
		has_start_date < 1918.11.11
		has_global_flag = WWI_BUL_HAS_CAPITULATED
		NOT = { has_government = national_syndicalism }
		NOT = { has_country_flag = BUL_avoid_bunt_capitulations }
	}
	
	immediate = {
		hidden_effect = {
			news_event = { id = news_n.106 hours = 12 }
		}
	}
	
	option = {
		name = bulgaria.4.a
		hidden_effect = {
		remove_ideas = BUL_Ferdinand_I_idea
		set_capital = 212
		}
		start_civil_war = {
				ruling_party = authoritarism
				ideology = national_syndicalism
				size = 0.5
				states = { 48 }
				keep_unit_leaders = {
					75001 75002 75003 75004 75005 75006
				}
		}
		random_other_country = {
				limit = {
					original_tag = BUL
					has_government = national_syndicalism
				}
				set_stability = 0.9
				set_war_support = 0.8
				create_corps_commander = { name = "Rayko Daskalov" id = 75007 portrait_path = "gfx/leaders/BUL/Rayko_Daskalov.dds" traits = { politically_connected guerilla_fighter } skill = 1 attack_skill = 1 defense_skill = 2 planning_skill = 1 logistics_skill = 1 }
				every_unit_leader = { limit = { NOT = { has_id = 75007 } } set_nationality = BUL }
		}
		hidden_effect = { set_capital = 48 }
	}
	
	option = {
		name = bulgaria.4.b
		trigger = {
			is_ai = no
		}
		create_corps_commander = { name = "Rayko Daskalov" id = 75007 portrait_path = "gfx/leaders/BUL/Rayko_Daskalov.dds" traits = { politically_connected guerilla_fighter } skill = 1 attack_skill = 1 defense_skill = 2 planning_skill = 1 logistics_skill = 1 }
		hidden_effect = {
			drop_cosmetic_tag = yes
			remove_ideas = BUL_Ferdinand_I_idea
		}
		start_civil_war = {
				ruling_party = national_syndicalism
				ideology = authoritarism
				size = 0.5
				states = { 944 212 987 946 945 211 }
				keep_unit_leaders = { 75007  } 
		}
		random_other_country = {
				limit = {
					original_tag = BUL
					has_government = authoritarism
				}
				set_stability = 0.9
				set_war_support = 0.8
				add_ideas = limited_monarchy_gov_form
				save_global_event_target_as = BUL_CW
				BUL = { every_unit_leader = { limit = { NOT = { has_id = 75007 } } set_nationality = event_target:BUL_CW } }
				hidden_effect = { clear_global_event_target = BUL_CW }
		}
		add_ideas = parliamentary_republic_gov_form
	}
	
}

country_event = {
	id = bulgaria.8
	title = bulgaria.8.t
	desc = bulgaria.8.d
	picture = GFX_report_event_bul_fall_of_sophia
	is_triggered_only = yes
	option = {
		name = bulgaria.8.a
	}
}

country_event = {
	id = bulgaria.9
	title = bulgaria.9.t
	desc = bulgaria.9.d
	picture = GFX_report_event_bul_fall_of_sophia
	is_triggered_only = yes
	option = {
		name = bulgaria.9.a
		if = {
			limit = { tag = BUL }
			add_war_support = -0.05
			add_stability = -0.025
			add_popularity = { ideology = authoritarism popularity = -0.03 }
		}
	}
}

country_event = {
	id = bulgaria.10
	title = bulgaria.10.t
	desc = bulgaria.10.d
	picture = GFX_report_event_bul_fall_of_sophia
	is_triggered_only = yes
	option = {
		name = bulgaria.10.a
	}
}

# Болгары требуют себе Северную Добруджу
country_event = {
	id = bulgaria.11
	title = bulgaria.11.t
	desc = bulgaria.11.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = { #Да
		name = bulgaria.11.a
		BUL = { country_event = bulgaria.12 }
		if = {
			limit = { tag = ROM }
			add_stability = -0.07
			add_popularity = { ideology = communism popularity = 0.04 }
			add_popularity = { ideology = fascism popularity = 0.04 }
			BUL = { transfer_state = 855 }
			else = {
				BUL = {
					set_state_controller = 855
					effect_tooltip = {
						add_war_support = 0.05
						add_popularity = { ideology = authoritarism popularity = 0.05 }
					}
				}
			}
		}
	}
	
	option = { #Нет
		trigger = { 855 = { is_demilitarized_zone = no } }
		name = bulgaria.11.b
		BUL = { country_event = bulgaria.13 }
	}
}

# Союзники согласились
country_event = {
	id = bulgaria.12
	title = bulgaria.12.t
	desc = bulgaria.12.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.12.a
		if = {
			limit = { NOT = { has_war_with = ROM } }
			effect_tooltip = {
				ROM = {
					add_stability = -0.07
					add_popularity = { ideology = communism popularity = 0.04 }
					add_popularity = { ideology = fascism popularity = 0.04 }
				}
			}
			else = {
				add_war_support = 0.05
				add_popularity = { ideology = authoritarism popularity = 0.05 }
			}
		}
	}
}

# Союзники не согласились
country_event = {
	id = bulgaria.13
	title = bulgaria.13.t
	desc = bulgaria.13.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.13.a
		add_war_support = -0.05
		add_stability = -0.025
		add_popularity = { ideology = authoritarism popularity = -0.03 }
		remove_ruling_party_popularity_3 = yes
	}
	option = {
		trigger = { NOT = { has_war_with = ROM } }
		name = bulgaria.13.b
		start_border_war = {
			change_state_after_war = yes
			attacker = {
				state = 856
				num_provinces = 1
				on_win = bulgaria.8
				on_lose = bulgaria.9
				on_cancel = bulgaria.10
			}
			defender = {
				state = 855
				num_provinces = 1
				on_win = bulgaria.9
				on_lose = bulgaria.8
				on_cancel = bulgaria.10
			}
		}
	}
}

# Болгары требуют себе Нови-Пазар
country_event = {
	id = bulgaria.14
	title = bulgaria.14.t
	desc = bulgaria.14.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = { #Да
		name = bulgaria.14.a
		add_to_variable = { global.Central_Powers_give_BUL_Novi_Pazar = vote_power }
		
		add_to_variable = { global.Central_Powers_major_conf_votes = vote_power }
		
		hidden_effect = {
			if = {
				limit = { check_variable = { global.Central_Powers_major_conf_votes = global.Central_Powers_major_conf_members } }
				if = {
					limit = { check_variable = { global.Central_Powers_not_give_BUL_Novi_Pazar > global.Central_Powers_give_BUL_Novi_Pazar } }
					else = {
						BUL = { country_event = bulgaria.15 }
						SER = {
							every_owned_state = {
								limit = { OR = { is_controlled_by = AUH is_controlled_by = GER is_controlled_by = TUR } OR = { state = 108 state = 969 state = 948 state = 947 state = 817 state = 818 state = 106 state = 993 } }
								BUL = { set_state_controller = PREV }
							}
						}
					}
					BUL = { country_event = bulgaria.16 }
				}
				clear_variable = global.Central_Powers_major_conf_votes
				clear_variable = global.Central_Powers_major_conf_members
				clear_variable = global.Central_Powers_not_give_BUL_Novi_Pazar
				clear_variable = global.Central_Powers_give_BUL_Novi_Pazar
			}
		}
	}
	
	option = { #Нет
		name = bulgaria.14.b
		add_to_variable = { global.Central_Powers_not_give_BUL_Novi_Pazar = vote_power }
		
		add_to_variable = { global.Central_Powers_major_conf_votes = vote_power }
		
		hidden_effect = {
			if = {
				limit = { check_variable = { global.Central_Powers_major_conf_votes = global.Central_Powers_major_conf_members } }
				if = {
					limit = { check_variable = { global.Central_Powers_not_give_BUL_Novi_Pazar > global.Central_Powers_give_BUL_Novi_Pazar } }
					else = {
						BUL = { country_event = bulgaria.15 }
						SER = {
							every_owned_state = {
								limit = { OR = { is_controlled_by = AUH is_controlled_by = GER is_controlled_by = TUR } OR = { state = 108 state = 969 state = 948 state = 947 state = 817 state = 818 state = 106 state = 993 } }
								BUL = { set_state_controller = PREV }
							}
						}
					}
					BUL = { country_event = bulgaria.16 }
				}
				clear_variable = global.Central_Powers_major_conf_votes
				clear_variable = global.Central_Powers_major_conf_members
				clear_variable = global.Central_Powers_not_give_BUL_Novi_Pazar
				clear_variable = global.Central_Powers_give_BUL_Novi_Pazar
			}
		}
	}
}

# Союзники согласились
country_event = {
	id = bulgaria.15
	title = bulgaria.15.t
	desc = bulgaria.15.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.15.a
		add_popularity = { ideology = authoritarism popularity = 0.04 }
		add_war_support = 0.04
		AUH = {
			add_stability = 0.03
		}
	}
}

# Союзники не согласились
country_event = {
	id = bulgaria.16
	title = bulgaria.16.t
	desc = bulgaria.16.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.16.a
		add_political_power = -50
	}
}

# Болгары выбирают что делать с Албанией
country_event = {
	id = bulgaria.17
	title = bulgaria.17.t
	desc = bulgaria.17.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = { #Ради безопасности Македонии Албания будет занята полностью
		name = bulgaria.17.a
		set_country_flag = BUL_claim_on_ALB_1
			set_variable = { global.Central_Powers_major_conf_votes = 0 }
			set_variable = { global.Central_Powers_major_conf_members = 0 }
			set_variable = { global.Central_Powers_not_give_BUL_ALB = 0 }
			set_variable = { global.Central_Powers_give_BUL_ALB = 0 }
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					is_subject = no
					capital_scope = { is_on_continent = europe }
				}
				if = {
					limit = {
						OR = {
							tag = GER
							tag = AUH
							tag = TUR
						}
					}
					set_variable = { vote_power = 2 }
					add_to_variable = { global.Central_Powers_major_conf_members = 2 }
					else = {
						set_variable = { vote_power = 1 }
						add_to_variable = { global.Central_Powers_major_conf_members = 1 }
					}
				}
				country_event = { id = bulgaria.18 days = 1 }
			}
	}
	
	option = { #Кирилл Преславский позаботится о благе албанского народа
		name = bulgaria.17.b
		set_country_flag = BUL_claim_on_ALB_2
			set_variable = { global.Central_Powers_major_conf_votes = 0 }
			set_variable = { global.Central_Powers_major_conf_members = 0 }
			set_variable = { global.Central_Powers_not_give_BUL_ALB = 0 }
			set_variable = { global.Central_Powers_give_BUL_ALB = 0 }
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					is_subject = no
					capital_scope = { is_on_continent = europe }
				}
				if = {
					limit = {
						OR = {
							tag = GER
							tag = AUH
							tag = TUR
						}
					}
					set_variable = { vote_power = 2 }
					add_to_variable = { global.Central_Powers_major_conf_members = 2 }
					else = {
						set_variable = { vote_power = 1 }
						add_to_variable = { global.Central_Powers_major_conf_members = 1 }
					}
				}
				country_event = { id = bulgaria.18 days = 1 }
			}
	}
	
	option = { #Третья нота понравится туркам и сыграет нам на руку
		name = bulgaria.17.c
		set_country_flag = BUL_claim_on_ALB_3
			set_variable = { global.Central_Powers_major_conf_votes = 0 }
			set_variable = { global.Central_Powers_major_conf_members = 0 }
			set_variable = { global.Central_Powers_not_give_BUL_ALB = 0 }
			set_variable = { global.Central_Powers_give_BUL_ALB = 0 }
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					is_subject = no
					capital_scope = { is_on_continent = europe }
				}
				if = {
					limit = {
						OR = {
							tag = GER
							tag = AUH
							tag = TUR
						}
					}
					set_variable = { vote_power = 2 }
					add_to_variable = { global.Central_Powers_major_conf_members = 2 }
					else = {
						set_variable = { vote_power = 1 }
						add_to_variable = { global.Central_Powers_major_conf_members = 1 }
					}
				}
				country_event = { id = bulgaria.18 days = 1 }
			}
	}
}


# Болгары требуют себе Албанию
country_event = {
	id = bulgaria.18
	title = bulgaria.18.t
	desc = {
		text = bulgaria.18.d
		trigger = { FROM = { has_country_flag = BUL_claim_on_ALB_1 } }
	}
	desc = {
		text = bulgaria.18.d_2
		trigger = { FROM = { has_country_flag = BUL_claim_on_ALB_2 } }
	}
	desc = {
		text = bulgaria.18.d_3
		trigger = { FROM = { has_country_flag = BUL_claim_on_ALB_3 } }
	}
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = { #Да
		name = bulgaria.18.a
		add_to_variable = { global.Central_Powers_give_BUL_ALB = vote_power }
		
		add_to_variable = { global.Central_Powers_major_conf_votes = vote_power }
		
		hidden_effect = {
			if = {
				limit = { check_variable = { global.Central_Powers_major_conf_votes = global.Central_Powers_major_conf_members } }
				if = {
					limit = { check_variable = { global.Central_Powers_not_give_BUL_ALB > global.Central_Powers_give_BUL_ALB } }
					else = {
						BUL = {
							country_event = bulgaria.19
						}
					}
					BUL = { country_event = bulgaria.20 }
				}
				clear_variable = global.Central_Powers_major_conf_votes
				clear_variable = global.Central_Powers_major_conf_members
				clear_variable = global.Central_Powers_not_give_BUL_ALB
				clear_variable = global.Central_Powers_give_BUL_ALB
			}
		}
	}
	
	option = { #Нет
		name = bulgaria.18.b
		add_to_variable = { global.Central_Powers_not_give_BUL_ALB = vote_power }
		
		add_to_variable = { global.Central_Powers_major_conf_votes = vote_power }
		
		hidden_effect = {
			if = {
				limit = { check_variable = { global.Central_Powers_major_conf_votes = global.Central_Powers_major_conf_members } }
				if = {
					limit = { check_variable = { global.Central_Powers_not_give_BUL_ALB > global.Central_Powers_give_BUL_ALB } }
					else = {
						BUL = {
							country_event = bulgaria.19
						}
					}
					BUL = { country_event = bulgaria.20 }
				}
				clear_variable = global.Central_Powers_major_conf_votes
				clear_variable = global.Central_Powers_major_conf_members
				clear_variable = global.Central_Powers_not_give_BUL_ALB
				clear_variable = global.Central_Powers_give_BUL_ALB
			}
		}
	}
}

# Союзники согласились
country_event = {
	id = bulgaria.19
	title = bulgaria.19.t
	desc = {
		text = bulgaria.19.d
		trigger = { has_country_flag = BUL_claim_on_ALB_1 }
	}
	desc = {
		text = bulgaria.19.d_2
		trigger = { has_country_flag = BUL_claim_on_ALB_2 }
	}
	desc = {
		text = bulgaria.19.d_3
		trigger = { has_country_flag = BUL_claim_on_ALB_3 }
	}
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.19.a
		add_popularity = { ideology = authoritarism popularity = 0.04 }
		add_war_support = 0.04
		AUH = {
			add_stability = 0.03
		}
	}
}

# Союзники не согласились
country_event = {
	id = bulgaria.20
	title = bulgaria.20.t
	desc = {
		text = bulgaria.20.d
		trigger = { has_country_flag = BUL_claim_on_ALB_1 }
	}
	desc = {
		text = bulgaria.20.d_2
		trigger = { has_country_flag = BUL_claim_on_ALB_2 }
	}
	desc = {
		text = bulgaria.20.d_3
		trigger = { has_country_flag = BUL_claim_on_ALB_3 }
	}
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.20.a
		clr_country_flag = BUL_claim_on_ALB_1
		clr_country_flag = BUL_claim_on_ALB_2
		clr_country_flag = BUL_claim_on_ALB_3
	}
}

# Болгария просит ружия
country_event = {
	id = bulgaria.21
	title = bulgaria.21.t
	desc = bulgaria.21.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.21.a
		BUL = {
			if = {
				limit = { has_idea = hyper_inflation_1 }
				swap_ideas = {
					remove_idea = hyper_inflation_1
					add_idea = hyper_inflation_2
				}
			}
			else_if = {
				limit = { has_idea = hyper_inflation_2 }
				swap_ideas = {
					remove_idea = hyper_inflation_2
					add_idea = hyper_inflation_3
				}
			}
			else_if = {
				limit = { has_idea = hyper_inflation_3 }
				swap_ideas = {
					remove_idea = hyper_inflation_3
					add_idea = hyper_inflation_4
				}
			}
			else_if = {
				limit = { has_idea = hyper_inflation_4 }
				swap_ideas = {
					remove_idea = hyper_inflation_4
					add_idea = hyper_inflation_5
				}
			}
			else_if = {
				limit = { NOT = { has_idea = hyper_inflation_5 } }
				add_ideas = hyper_inflation_1
			}
		}
		send_equipment = {
			equipment = field_guns_equipment
			amount = 180
			target = BUL
		}
		send_equipment = {
			equipment = artillery_equipment
			amount = 120
			target = BUL
		}
		send_equipment = {
			equipment = motorized_equipment
			amount = 120
			target = BUL
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = bulgaria.21.b
		BUL = {
			add_political_power = -35
		}
		add_political_power = 10
		send_equipment = {
			equipment = field_guns_equipment
			amount = 100
			target = BUL
		}
		send_equipment = {
			equipment = artillery_equipment
			amount = 50
			target = BUL
		}
		ai_chance = { factor = 3 }
	}
	option = {
		name = bulgaria.21.c
		BUL = { country_event = { id = bulgaria.22 days = 1 } set_country_flag = BUL_betrayed_by_GER }
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = bulgaria.22
	title = bulgaria.22.t
	desc = bulgaria.22.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.22.a
		ai_chance = { factor = 1 }
	}
	option = {
		name = bulgaria.22.b
		ai_chance = { factor = 3 }
		add_war_support = -0.04
		clr_country_flag = BUL_betrayed_by_GER
	}
}

# Новое правительство
country_event = {
	id = bulgaria.31
	title = bulgaria.31.t
	desc = bulgaria.31.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.31.a
		hidden_effect = {
			remove_ideas_with_trait = head_of_government_trait
			remove_ideas_with_trait = foreign_ministe_trait
			remove_ideas_with_trait = economy_minister_trait
			remove_ideas_with_trait = security_minister_trait
			remove_ideas_with_trait = head_of_intel_trait
			remove_ideas_with_trait = military_minister_trait
		}
		
		add_ideas = {
			Aleksandar_Malinov_1
			Aleksandar_Malinov_2
			Andrey_Lyapchev_3
			Mihail_Takev_4
			Iosif_Fadenheht_5
			Sava_Savov_6
		}
		
		set_politics = { ruling_party = market_liberalism }
		add_popularity = { ideology = market_liberalism popularity = 0.15 }
		
		ai_chance = { factor = 1 }
	}
	option = {
		name = bulgaria.31.b
		hidden_effect = {
			remove_ideas_with_trait = head_of_government_trait
			remove_ideas_with_trait = foreign_ministe_trait
			remove_ideas_with_trait = security_minister_trait
			remove_ideas_with_trait = economy_minister_trait
			remove_ideas_with_trait = military_minister_trait
		}
		add_ideas = {
			Vasil_Radoslavov_1
			Aleksandar_Tsankov_2
			Andrey_Lyapchev_3
			Ivan_Vylkov_4
			Mihail_Savov_6
		}
		remove_ideas_with_trait = head_of_intel_trait
		
		add_political_power = 75
		add_popularity = { ideology = social_conservatism popularity = 0.05 }
		
		set_country_flag = BUL_flag_war_must_go_on
		ai_chance = { factor = 1 }
	}
}

# Гром над Моравой
country_event = {
	id = bulgaria.41
	title = bulgaria.41.t
	desc = bulgaria.41.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.41.a
		if = {
			limit = { is_ai = no }
			create_wargoal = {
				type = annex_everything
				target = SER
			}
			else = { declare_war_on = { target = SER type = annex_everything } }
		}
	}
}

# Мир с Турцией
country_event = {
	id = bulgaria.42
	title = bulgaria.42.t
	desc = bulgaria.42.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	trigger = {
		tag = BUL
		has_country_flag = BUL_flag_we_are_no_longer_paradise_submissive
		has_war_with = TUR
		controls_state = 949
		controls_state = 341
		controls_state = 860
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		clr_country_flag = BUL_flag_we_are_no_longer_paradise_submissive
	}
	
	option = {
		name = bulgaria.42.a
		add_war_support = -0.07
		ai_chance = { factor = 0 }
	}
	option = {
		name = bulgaria.42.b
		add_war_support = -0.05
		TUR = { country_event = bulgaria.43 }
		ai_chance = { factor = 1 }
	}
	option = {
		name = bulgaria.42.c
		TUR = { set_country_flag = BUL_peace_without_Constantinopol country_event = bulgaria.43 }
		ai_chance = { factor = 0 }
	}
}
# Мир с Турцией
country_event = {
	id = bulgaria.43
	title = bulgaria.43.t
	desc = {
		text = bulgaria.43.d
		trigger = { NOT = { has_country_flag = BUL_peace_without_Constantinopol } }
	}
	desc = {
		text = bulgaria.43.d_1
		trigger = { has_country_flag = BUL_peace_without_Constantinopol }
	}
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.43.a
		ai_chance = {
			factor = 1
			modifier = { factor = 0 has_country_flag = BUL_peace_without_Constantinopol }
		}
		clr_country_flag = BUL_peace_without_Constantinopol
		FROM = { country_event = bulgaria.44 }
	}
	option = {
		name = bulgaria.43.b
		ai_chance = {
			factor = 3
		}
		every_owned_state = {
			limit = {
				is_on_continent = europe
				NOT = { state = 341 }
			}
			FROM = { transfer_state = PREV }
		}
		if = {
			limit = { NOT = { has_country_flag = BUL_peace_without_Constantinopol } }
			FROM = { transfer_state = 341 }
		}
		every_country = {
			limit = { OR = { AND = { is_in_faction_with = BUL is_faction_leader = yes } tag = BUL is_in_faction = no } }
			ROOT = { white_peace = PREV }
		}
		clr_country_flag = BUL_peace_without_Constantinopol
	}
}
# Отказ Турции
country_event = {
	id = bulgaria.44
	title = bulgaria.44.t
	desc = bulgaria.44.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.44.a
	}
}

# Отправка дипломатов Антанте
country_event = {
	id = bulgaria.51
	title = bulgaria.51.t
	desc = bulgaria.51.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.51.a
		every_country = {
			limit = { has_country_flag = WWI_Entente_member is_subject = no }
			hidden_effect = {
				set_variable = { global.Entente_major_conf_members = 0 }
				set_variable = { global.Entente_white_peace_with_BUL = 0 }
				set_variable = { global.Entente_not_white_peace_with_BUL = 0 }
				set_variable = { global.Entente_major_conf_votes = 0 }
				if = {
					limit = { FRA = { has_country_flag = WWI_Entente_member } }
					add_to_variable = { global.Entente_major_conf_members = 3 }
					FRA = { set_variable = { vote_power = 3 } }
				}
				if = {
					limit = { ENG = { has_country_flag = WWI_Entente_member } }
					add_to_variable = { global.Entente_major_conf_members = 3 }
					ENG = { set_variable = { vote_power = 3 } }
				}
				if = {
					limit = { USA = { has_country_flag = WWI_Entente_member } }
					add_to_variable = { global.Entente_major_conf_members = 3 }
					USA = { set_variable = { vote_power = 3 } }
				}
				if = {
					limit = { RUS = { has_country_flag = WWI_Entente_member } }
					add_to_variable = { global.Entente_major_conf_members = 3 }
					RUS = { set_variable = { vote_power = 3 } }
				}
				if = {
					limit = { FRA = { has_country_flag = WWI_Entente_member } RUS = { has_country_flag = WWI_Entente_member } }
					add_to_variable = { global.Entente_major_conf_members = 4 }
					FRA = { set_variable = { vote_power = 4 } }
				}
			}
			country_event = { id = bulgaria.52 days = 2 }
		}
	}
}
# Болгарский запрос перемирия
country_event = {
	id = bulgaria.52
	title = bulgaria.52.t
	desc = bulgaria.52.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.52.a
		add_to_variable = { global.Entente_white_peace_with_BUL = vote_power }
		
		add_to_variable = { global.Entente_major_conf_votes = vote_power }
		
		hidden_effect = {
			if = {
				limit = { check_variable = { global.Entente_major_conf_votes = global.Entente_major_conf_members } }
				if = {
					limit = { check_variable = { global.Entente_white_peace_with_BUL > global.Entente_not_white_peace_with_BUL } }
					BUL = { country_event = bulgaria.53 }
					else = {
						BUL = { country_event = bulgaria.54 }
					}
				}
				clear_variable = global.Entente_major_conf_votes
				clear_variable = global.Entente_major_conf_members
				clear_variable = global.Entente_white_peace_with_BUL
				clear_variable = global.Entente_not_white_peace_with_BUL
			}
		}
	}
	option = {
		name = bulgaria.52.b
		add_to_variable = { global.Entente_not_white_peace_with_BUL = vote_power }
		
		add_to_variable = { global.Entente_major_conf_votes = vote_power }
		
		hidden_effect = {
			if = {
				limit = { check_variable = { global.Entente_major_conf_votes = global.Entente_major_conf_members } }
				if = {
					limit = { check_variable = { global.Entente_white_peace_with_BUL > global.Entente_not_white_peace_with_BUL } }
					BUL = { country_event = bulgaria.53 }
					else = {
						BUL = { country_event = bulgaria.54 }
					}
				}
				clear_variable = global.Entente_major_conf_votes
				clear_variable = global.Entente_major_conf_members
				clear_variable = global.Entente_white_peace_with_BUL
				clear_variable = global.Entente_not_white_peace_with_BUL
			}
		}
	}
}
# Ответ Антанты белый мир
country_event = {
	id = bulgaria.53
	title = bulgaria.53.t
	desc = bulgaria.53.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.53.a
		add_war_support = -0.2
		add_stability = 0.05
		set_global_flag = WWI_BUL_HAS_CAPITULATED
		BUL = {
			clr_country_flag = BUL_claim_on_ALB_1
			clr_country_flag = BUL_claim_on_ALB_2
			clr_country_flag = BUL_claim_on_ALB_3
		}
		every_state = {
			limit = {
				region = 130
				is_core_of = UKR
				is_owned_by = AUH
			}
			UKR = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				region = 130
				is_core_of = USR
				is_owned_by = AUH
			}
			USR = { transfer_state = PREV }
		}
			leave_faction = yes
			add_ideas = neutral_foreign_policy_law
			every_country = {
				limit = {
					has_war_with = ROOT
					OR = { is_faction_leader = yes is_in_faction = no }
					NOT = { original_tag = ROOT }
				}
				ROOT = { white_peace = PREV }
			}
			every_country = {
				limit = { is_subject_of = ROOT }
				hidden_effect = { country_event = { id = compiegne_armistice.0 hours = 1 } }
			}
			every_country = {
				limit = { OR = { tag = ENG tag = FRA tag = ITA tag = GRR } NOT = { is_in_faction_with = GER } }
				PREV = { give_military_access = PREV }
			}
		if = {
			limit = {
				controls_state = 106
			}
			transfer_state = 106
			transfer_state = 818
			transfer_state = 993
		}
	}
}
# Ответ Антанты ол юр бэйс ар белонг ту ас вы хуесосы ебаные
country_event = {
	id = bulgaria.54
	title = bulgaria.54.t
	desc = bulgaria.54.d
	picture = GFX_report_event_bul_fall_of_sophia
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.54.a
		country_event = compiegne_armistice.999
	}
}

# Экономичские проблемы в ходе ПМВ

country_event = {
	id = bulgaria.96
	hidden = yes
	trigger = {
		tag = BUL
		has_war = no
		OR = {
			has_idea = hyper_inflation_1
			has_idea = hyper_inflation_2
			has_idea = hyper_inflation_3
			has_idea = hyper_inflation_4
			has_idea = hyper_inflation_5
		}
	}
	mean_time_to_happen = {
		days = 30
	}
	option = {
		if = {
			limit = { has_idea = hyper_inflation_1 }
			remove_ideas = hyper_inflation_1
		}
		if = {
			limit = { has_idea = hyper_inflation_2 }
			swap_ideas = {
				remove_idea = hyper_inflation_2
				add_idea = hyper_inflation_1
			}
		}
		if = {
			limit = { has_idea = hyper_inflation_3 }
			swap_ideas = {
				remove_idea = hyper_inflation_3
				add_idea = hyper_inflation_2
			}
		}
		if = {
			limit = { has_idea = hyper_inflation_4 }
			swap_ideas = {
				remove_idea = hyper_inflation_4
				add_idea = hyper_inflation_3
			}
		}
		if = {
			limit = { has_idea = hyper_inflation_5 }
			swap_ideas = {
				remove_idea = hyper_inflation_5
				add_idea = hyper_inflation_4
			}
		}
	}
}

country_event = {
	id = bulgaria.97
	hidden = yes
	trigger = {
		tag = BUL
		has_war = yes
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_BUL_HAS_CAPITULATED }
		NOT = { has_global_flag = WWI_ENG_HAS_CAPITULATED }
		has_war_with = ENG
		OR = {
			has_idea = foodstuffs_supply_crisis_1
			has_idea = foodstuffs_supply_crisis_2
			AND = {
				has_idea = foodstuffs_supply_crisis_3
				NOT = { has_idea = UKR_zerno_out }
				OR = {
					AND = { FRA = { controls_state = 16 is_puppet = no } }
					AND = { FRA = { is_puppet = yes NOT = { controls_state = 16 } } }
				}
			}
			AND = {
				has_idea = foodstuffs_supply_crisis_4
				OR = {
					NOT = { has_idea = UKR_zerno_out }
					OR = {
						AND = { FRA = { controls_state = 16 is_puppet = no } }
						AND = { FRA = { is_puppet = yes NOT = { controls_state = 16 } } }
					}
				}
			}
		}
	}
	mean_time_to_happen = {
		days = 180
		modifier = {
			factor = 0.9
			surrender_progress > 0.02
		}
		modifier = {
			factor = 0.9
			surrender_progress > 0.04
		}
		modifier = {
			factor = 0.8
			surrender_progress > 0.06
		}
		modifier = {
			factor = 0.8
			surrender_progress > 0.08
		}
		modifier = {
			factor = 0.7
			surrender_progress > 0.1
		}
		modifier = {
			factor = 0.7
			surrender_progress > 0.12
		}
		modifier = {
			factor = 0.6
			surrender_progress > 0.14
		}
		modifier = {
			factor = 0.6
			surrender_progress > 0.16
		}
		modifier = {
			factor = 0.5
			surrender_progress > 0.18
		}
		modifier = {
			factor = 0.5
			surrender_progress > 0.2
		}
		modifier = {
			factor = 1.5
			has_idea = UKR_zerno_out
		}
	}
	option = {
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_4 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_4
				add_idea = foodstuffs_supply_crisis_5
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_3 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_3
				add_idea = foodstuffs_supply_crisis_4
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_2 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_2
				add_idea = foodstuffs_supply_crisis_3
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_1 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_1
				add_idea = foodstuffs_supply_crisis_2
			}
		}
	}
}

country_event = {
	id = bulgaria.98
	hidden = yes
	trigger = {
		tag = BUL
		OR = {
			has_war = no
			NOT = { has_global_flag = WWI_is_now }
			has_global_flag = WWI_BUL_HAS_CAPITULATED
			NOT = { has_war_with = ENG }
		}
		OR = {
			has_idea = foodstuffs_supply_crisis_1
			has_idea = foodstuffs_supply_crisis_2
			has_idea = foodstuffs_supply_crisis_3
			has_idea = foodstuffs_supply_crisis_4
			has_idea = foodstuffs_supply_crisis_5
		}
	}
	mean_time_to_happen = {
		days = 60
	}
	option = {
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_1 }
			remove_ideas = foodstuffs_supply_crisis_1
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_2 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_2
				add_idea = foodstuffs_supply_crisis_1
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_3 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_3
				add_idea = foodstuffs_supply_crisis_2
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_4 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_4
				add_idea = foodstuffs_supply_crisis_3
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_5 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_5
				add_idea = foodstuffs_supply_crisis_4
			}
		}
	}
}

country_event = {
	id = bulgaria.99
	hidden = yes
	trigger = {
		tag = BUL
		has_global_flag = WWI_is_now
		has_idea = UKR_zerno_out
		#OR = {
			#AND = { ITA = { controls_state = 159 is_puppet = yes } }
			#AND = { ITA = { is_puppet = no NOT = { controls_state = 159 } } }
			#AND = { has_global_flag = WWI_ITA_HAS_CAPITULATED }
		#}
		OR = {
			has_idea = foodstuffs_supply_crisis_3
			has_idea = foodstuffs_supply_crisis_4
			has_idea = foodstuffs_supply_crisis_5
		}
	}
	mean_time_to_happen = {
		days = 90
	}
	option = {
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_3 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_3
				add_idea = foodstuffs_supply_crisis_2
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_4 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_4
				add_idea = foodstuffs_supply_crisis_3
			}
		}
		if = {
			limit = { has_idea = foodstuffs_supply_crisis_5 }
			swap_ideas = {
				remove_idea = foodstuffs_supply_crisis_5
				add_idea = foodstuffs_supply_crisis_4
			}
		}
	}
}